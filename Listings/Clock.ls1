A51 MACRO ASSEMBLER  CLOCK                                                                01/21/2018 13:56:58 PAGE     1


MACRO ASSEMBLER A51 V8.2.5.0
OBJECT MODULE PLACED IN .\Objects\Clock.OBJ
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE .\Objects\Clock.src PR(.\Listings\Clock.ls1) EP DEBUG

LOC  OBJ            LINE     SOURCE

                       1     ; .\Objects\Clock.SRC generated from: Clock.c

                       2     ; COMPILER INVOKED BY:

                       3     ;        C:\Keil_v5\C51\BIN\C51.EXE Clock.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRI
                             NT(.\Listings\Clock.lst) TABS(2) SRC(.\Objects\Clock.SRC)

                       4     

                       5     $nomod51 

                       6     

                       7     NAME    CLOCK

                       8     

  0080                 9     P0      DATA    080H

  0090                10     P1      DATA    090H

  00A0                11     P2      DATA    0A0H

  00B0                12     P3      DATA    0B0H

  00B4                13     T0      BIT     0B0H.4

  00D6                14     AC      BIT     0D0H.6

  00B5                15     T1      BIT     0B0H.5

  0090                16     T2      BIT     090H.0

  00AF                17     EA      BIT     0A8H.7

  00A8                18     IE      DATA    0A8H

  00CE                19     EXF2    BIT     0C8H.6

  00B7                20     RD      BIT     0B0H.7

  00AC                21     ES      BIT     0A8H.4

  00B8                22     IP      DATA    0B8H

  0098                23     RI      BIT     098H.0

  00B2                24     INT0    BIT     0B0H.2

  00D7                25     CY      BIT     0D0H.7

  0099                26     TI      BIT     098H.1

  00B3                27     INT1    BIT     0B0H.3

  00CB                28     RCAP2H  DATA    0CBH

  00BC                29     PS      BIT     0B8H.4

  0081                30     SP      DATA    081H

  0091                31     T2EX    BIT     090H.1

  00D2                32     OV      BIT     0D0H.2

  00CA                33     RCAP2L  DATA    0CAH

  00C9                34     C_T2    BIT     0C8H.1

  00B6                35     WR      BIT     0B0H.6

  00CD                36     RCLK    BIT     0C8H.5

  00CC                37     TCLK    BIT     0C8H.4

  0099                38     SBUF    DATA    099H

  0087                39     PCON    DATA    087H

  0098                40     SCON    DATA    098H

  0089                41     TMOD    DATA    089H

  0088                42     TCON    DATA    088H

  0089                43     IE0     BIT     088H.1

  008B                44     IE1     BIT     088H.3

  00F0                45     B       DATA    0F0H

  00C8                46     CP_RL2  BIT     0C8H.0

  00E0                47     ACC     DATA    0E0H

  00A9                48     ET0     BIT     0A8H.1

  00AB                49     ET1     BIT     0A8H.3

  008D                50     TF0     BIT     088H.5

  00AD                51     ET2     BIT     0A8H.5

  008F                52     TF1     BIT     088H.7

  00CF                53     TF2     BIT     0C8H.7

  009A                54     RB8     BIT     098H.2

  008C                55     TH0     DATA    08CH

  00A8                56     EX0     BIT     0A8H.0

  0088                57     IT0     BIT     088H.0

A51 MACRO ASSEMBLER  CLOCK                                                                01/21/2018 13:56:58 PAGE     2

  008D                58     TH1     DATA    08DH

  009B                59     TB8     BIT     098H.3

  00AA                60     EX1     BIT     0A8H.2

  008A                61     IT1     BIT     088H.2

  00CD                62     TH2     DATA    0CDH

  00D0                63     P       BIT     0D0H.0

  009F                64     SM0     BIT     098H.7

  008A                65     TL0     DATA    08AH

  009E                66     SM1     BIT     098H.6

  008B                67     TL1     DATA    08BH

  009D                68     SM2     BIT     098H.5

  00CC                69     TL2     DATA    0CCH

  00B9                70     PT0     BIT     0B8H.1

  00BB                71     PT1     BIT     0B8H.3

  00D3                72     RS0     BIT     0D0H.3

  00BD                73     PT2     BIT     0B8H.5

  008C                74     TR0     BIT     088H.4

  00D4                75     RS1     BIT     0D0H.4

  008E                76     TR1     BIT     088H.6

  00CA                77     TR2     BIT     0C8H.2

  00B8                78     PX0     BIT     0B8H.0

  00BA                79     PX1     BIT     0B8H.2

  0083                80     DPH     DATA    083H

  0082                81     DPL     DATA    082H

  00CB                82     EXEN2   BIT     0C8H.3

  009C                83     REN     BIT     098H.4

  00C8                84     T2CON   DATA    0C8H

  00B0                85     RXD     BIT     0B0H.0

  00B1                86     TXD     BIT     0B0H.1

  00D5                87     F0      BIT     0D0H.5

  00D0                88     PSW     DATA    0D0H

                      89     ?PR?_Delay?CLOCK     SEGMENT CODE 

                      90     ?PR?Bin2Bcd?CLOCK    SEGMENT CODE 

                      91     ?PR?display?CLOCK    SEGMENT CODE 

                      92     ?PR?INT_Init?CLOCK   SEGMENT CODE 

                      93     ?PR?TC0?CLOCK        SEGMENT CODE 

                      94     ?PR?add_time?CLOCK   SEGMENT CODE 

                      95     ?PR?sub_time?CLOCK   SEGMENT CODE 

                      96     ?PR?key1_down?CLOCK  SEGMENT CODE 

                      97     ?DT?key1_down?CLOCK  SEGMENT DATA OVERLAYABLE 

                      98     ?PR?key2_down?CLOCK  SEGMENT CODE 

                      99     ?DT?key2_down?CLOCK  SEGMENT DATA OVERLAYABLE 

                     100     ?PR?main?CLOCK       SEGMENT CODE 

                     101     ?C_INITSEG           SEGMENT CODE 

                     102     ?DT?CLOCK            SEGMENT DATA 

                     103             EXTRN   CODE (?C?SCDIV)

                     104             EXTRN   CODE (?C_STARTUP)

                     105             PUBLIC  dis_buff

                     106             PUBLIC  hour

                     107             PUBLIC  clock1

                     108             PUBLIC  count

                     109             PUBLIC  MODE

                     110             PUBLIC  Dis_code

                     111             PUBLIC  minute

                     112             PUBLIC  main

                     113             PUBLIC  key2_down

                     114             PUBLIC  key1_down

                     115             PUBLIC  sub_time

                     116             PUBLIC  add_time

                     117             PUBLIC  TC0

                     118             PUBLIC  INT_Init

                     119             PUBLIC  display

                     120             PUBLIC  Bin2Bcd

                     121             PUBLIC  _Delay

                     122     

----                 123             RSEG  ?DT?key1_down?CLOCK

A51 MACRO ASSEMBLER  CLOCK                                                                01/21/2018 13:56:58 PAGE     3

0000                 124     ?key1_down?BYTE:

0000                 125               i?744:   DS   1

                     126     

----                 127             RSEG  ?DT?key2_down?CLOCK

0000                 128     ?key2_down?BYTE:

0000                 129               i?845:   DS   1

                     130     

----                 131             RSEG  ?DT?CLOCK

0000                 132              minute:   DS   1

0001                 133            Dis_code:   DS   10

000B                 134                MODE:   DS   1

000C                 135               count:   DS   1

000D                 136              clock1:   DS   2

000F                 137                hour:   DS   1

0010                 138            dis_buff:   DS   4

                     139     

----                 140             RSEG  ?C_INITSEG

0000 01              141             DB      001H

0001 00       F      142             DB      count

0002 00              143             DB      000H

                     144     

0003 0A              145             DB      00AH

0004 00       F      146             DB      Dis_code

0005 C0              147             DB      0C0H

0006 F9              148             DB      0F9H

0007 A4              149             DB      0A4H

0008 B0              150             DB      0B0H

0009 99              151             DB      099H

000A 92              152             DB      092H

000B 82              153             DB      082H

000C F8              154             DB      0F8H

000D 80              155             DB      080H

000E 90              156             DB      090H

                     157     

000F 01              158             DB      001H

0010 00       F      159             DB      hour

0011 00              160             DB      000H

                     161     

0012 01              162             DB      001H

0013 00       F      163             DB      minute

0014 00              164             DB      000H

                     165     

0015 01              166             DB      001H

0016 00       F      167             DB      MODE

0017 00              168             DB      000H

                     169     

0018 02              170             DB      002H

0019 00       F      171             DB      clock1

001A 01              172             DB      001H

001B 00              173             DB      000H

                     174     

                     175     ; #include <reg52.h>

                     176     ; #define uchar unsigned char

                     177     ; #define uint unsigned int

                     178     ; 

                     179     ; uchar count=0;  // ¼ÆÊ×ÜÖµ

                     180     ; uchar Dis_code[]

                     181     ; ={0xc0,0xf9,0xa4,0xb0,0x99,0x92,0x82,0xf8,0x80,0x90};

                     182     ; uchar dis_buff[4];  //ÊÂë¹ÜÏÔÊ¾µÄËùÓÐÊ×Ö

                     183     ; char hour=0;  // Ê±

                     184     ; char minute=0;  // ·Ö

                     185     ; uchar MODE=0;  // Ä£Ê½Ñ¡Ôñ£¬ÉèÖÃÄÖÖÓ

                     186     ; uchar clock1[2]={1,0};  // ÄÖÖÓ

                     187     ; 

                     188     ; void Delay(uint del)

                     189     

A51 MACRO ASSEMBLER  CLOCK                                                                01/21/2018 13:56:58 PAGE     4

----                 190             RSEG  ?PR?_Delay?CLOCK

0000                 191     _Delay:

                     192             USING   0

                     193                             ; SOURCE LINE # 14

                     194     ;---- Variable 'del?040' assigned to Register 'R6/R7' ----

                     195     ; {

                     196                             ; SOURCE LINE # 15

                     197     ;       uint i,j;

                     198     ;       for(i=0; i<del; i++)

                     199                             ; SOURCE LINE # 17

                     200     ;---- Variable 'i?041' assigned to Register 'R4/R5' ----

0000 E4              201             CLR     A

0001 FD              202             MOV     R5,A

0002 FC              203             MOV     R4,A

0003                 204     ?C0001:

0003 C3              205             CLR     C

0004 ED              206             MOV     A,R5

0005 9F              207             SUBB    A,R7

0006 EC              208             MOV     A,R4

0007 9E              209             SUBB    A,R6

0008 5015            210             JNC     ?C0007

                     211     ;       for(j=0; j<192; j++)   

                     212                             ; SOURCE LINE # 18

                     213     ;---- Variable 'j?042' assigned to Register 'R2/R3' ----

000A E4              214             CLR     A

000B FB              215             MOV     R3,A

000C FA              216             MOV     R2,A

000D                 217     ?C0004:

000D 0B              218             INC     R3

000E BB0001          219             CJNE    R3,#00H,?C0041

0011 0A              220             INC     R2

0012                 221     ?C0041:

0012 EB              222             MOV     A,R3

0013 64C0            223             XRL     A,#0C0H

0015 4A              224             ORL     A,R2

0016 70F5            225             JNZ     ?C0004

0018                 226     ?C0003:

0018 0D              227             INC     R5

0019 BD0001          228             CJNE    R5,#00H,?C0042

001C 0C              229             INC     R4

001D                 230     ?C0042:

001D 80E4            231             SJMP    ?C0001

                     232     ;       ;

                     233     ; }

                     234                             ; SOURCE LINE # 20

001F                 235     ?C0007:

001F 22              236             RET     

                     237     ; END OF _Delay

                     238     

                     239     ; 

                     240     ; void Bin2Bcd(void)

                     241     

----                 242             RSEG  ?PR?Bin2Bcd?CLOCK

0000                 243     Bin2Bcd:

                     244             USING   0

                     245                             ; SOURCE LINE # 22

                     246     ; {

                     247                             ; SOURCE LINE # 23

                     248     ;       dis_buff[3]=hour/10;

                     249                             ; SOURCE LINE # 24

0000 E500     F      250             MOV     A,hour

0002 75F00A          251             MOV     B,#0AH

0005 120000   F      252             LCALL   ?C?SCDIV

0008 F500     F      253             MOV     dis_buff+03H,A

                     254     ;       dis_buff[2]=hour%10;

                     255                             ; SOURCE LINE # 25

A51 MACRO ASSEMBLER  CLOCK                                                                01/21/2018 13:56:58 PAGE     5

000A E500     F      256             MOV     A,hour

000C 75F00A          257             MOV     B,#0AH

000F 120000   F      258             LCALL   ?C?SCDIV

0012 85F000   F      259             MOV     dis_buff+02H,B

                     260     ;       dis_buff[1]=minute/10;

                     261                             ; SOURCE LINE # 26

0015 E500     F      262             MOV     A,minute

0017 75F00A          263             MOV     B,#0AH

001A 120000   F      264             LCALL   ?C?SCDIV

001D F500     F      265             MOV     dis_buff+01H,A

                     266     ;       dis_buff[0]=minute%10;

                     267                             ; SOURCE LINE # 27

001F E500     F      268             MOV     A,minute

0021 75F00A          269             MOV     B,#0AH

0024 120000   F      270             LCALL   ?C?SCDIV

0027 85F000   F      271             MOV     dis_buff,B

                     272     ; }

                     273                             ; SOURCE LINE # 28

002A 22              274             RET     

                     275     ; END OF Bin2Bcd

                     276     

                     277     ; 

                     278     ; void display(void)

                     279     

----                 280             RSEG  ?PR?display?CLOCK

0000                 281     display:

                     282             USING   0

                     283                             ; SOURCE LINE # 30

                     284     ; {

                     285                             ; SOURCE LINE # 31

                     286     ;       uchar i;

                     287     ;       for(i=0;i<4;i++)

                     288                             ; SOURCE LINE # 33

                     289     ;---- Variable 'i?243' assigned to Register 'R1' ----

0000 E4              290             CLR     A

0001 F9              291             MOV     R1,A

0002                 292     ?C0009:

                     293     ;       {

                     294                             ; SOURCE LINE # 34

                     295     ;               P2=~(0x08>>i);

                     296                             ; SOURCE LINE # 35

0002 7408            297             MOV     A,#08H

0004 A801            298             MOV     R0,AR1

0006 08              299             INC     R0

0007 8002            300             SJMP    ?C0044

0009                 301     ?C0043:

0009 C3              302             CLR     C

000A 13              303             RRC     A

000B                 304     ?C0044:

000B D8FC            305             DJNZ    R0,?C0043

000D F4              306             CPL     A

000E F5A0            307             MOV     P2,A

                     308     ;               P0=Dis_code[dis_buff[i]];

                     309                             ; SOURCE LINE # 36

0010 7400     F      310             MOV     A,#LOW (dis_buff)

0012 29              311             ADD     A,R1

0013 F8              312             MOV     R0,A

0014 E6              313             MOV     A,@R0

0015 2400     F      314             ADD     A,#LOW (Dis_code)

0017 F8              315             MOV     R0,A

0018 E6              316             MOV     A,@R0

0019 F580            317             MOV     P0,A

                     318     ;               Delay(1);

                     319                             ; SOURCE LINE # 37

001B 7F01            320             MOV     R7,#01H

001D 7E00            321             MOV     R6,#00H

A51 MACRO ASSEMBLER  CLOCK                                                                01/21/2018 13:56:58 PAGE     6

001F 120000   F      322             LCALL   _Delay

                     323     ;       }

                     324                             ; SOURCE LINE # 38

0022 09              325             INC     R1

0023 B904DC          326             CJNE    R1,#04H,?C0009

                     327     ; }

                     328                             ; SOURCE LINE # 39

0026                 329     ?C0012:

0026 22              330             RET     

                     331     ; END OF display

                     332     

                     333     ; 

                     334     ; void INT_Init(void)

                     335     

----                 336             RSEG  ?PR?INT_Init?CLOCK

0000                 337     INT_Init:

                     338                             ; SOURCE LINE # 41

                     339     ; {

                     340                             ; SOURCE LINE # 42

                     341     ;       TMOD=0x01;  // ÉèÖÃ¶¨Ê±Æ÷0Îª¹¤×÷·½Ê½1£¬16Î»¶¨Ê±/¼ÆÊÆ÷

                     342                             ; SOURCE LINE # 43

0000 758901          343             MOV     TMOD,#01H

                     344     ;       // 50ms ÇëÇóÒ»´ÎÖÐ¶Ï

                     345     ;       TH0=(65536-46058)/256;  // ¸ß8Î»¶¨Ê±Æ÷³õÖµ

                     346                             ; SOURCE LINE # 45

0003 758C4C          347             MOV     TH0,#04CH

                     348     ;       TL0=(65536-46058)%256;  // µÍ8Î»¶¨Ê±Æ÷³õÖµ

                     349                             ; SOURCE LINE # 46

0006 758A16          350             MOV     TL0,#016H

                     351     ;       EA=1;  // ¿ª×ÜÖÐ¶Ï

                     352                             ; SOURCE LINE # 47

0009 D2AF            353             SETB    EA

                     354     ;       ET0=1;  // ¶¨Ê±Æ÷0ÖÐ¶ÏÔÊÐí

                     355                             ; SOURCE LINE # 48

000B D2A9            356             SETB    ET0

                     357     ;       TR0=1;  // Æô¶¯¶¨Ê±Æ÷0£¬¿ªÊ¼¼ÆÊ

                     358                             ; SOURCE LINE # 49

000D D28C            359             SETB    TR0

                     360     ;       //EX0=1;

                     361     ;       //IT0=1;

                     362     ; }

                     363                             ; SOURCE LINE # 52

000F 22              364             RET     

                     365     ; END OF INT_Init

                     366     

----                 367     CSEG    AT      0000BH

000B 020000   F      368             LJMP    TC0

                     369     

                     370     ; 

                     371     ; void TC0(void) interrupt 1

                     372     

----                 373             RSEG  ?PR?TC0?CLOCK

                     374             USING   0

0000                 375     TC0:

0000 C0E0            376             PUSH    ACC

0002 C0F0            377             PUSH    B

0004 C083            378             PUSH    DPH

0006 C082            379             PUSH    DPL

0008 C0D0            380             PUSH    PSW

000A 75D000          381             MOV     PSW,#00H

000D C000            382             PUSH    AR0

000F C001            383             PUSH    AR1

0011 C002            384             PUSH    AR2

0013 C003            385             PUSH    AR3

0015 C004            386             PUSH    AR4

0017 C005            387             PUSH    AR5

A51 MACRO ASSEMBLER  CLOCK                                                                01/21/2018 13:56:58 PAGE     7

0019 C006            388             PUSH    AR6

001B C007            389             PUSH    AR7

                     390             USING   0

                     391                             ; SOURCE LINE # 54

                     392     ; {

                     393     ;       // 11.0592MHz ¾§ÕñÆµÂÊ 50ms ¼ÆÊÖµÎª 46080

                     394     ;       TH0=(65536-46080)/256;  // ³õÊ¼»¯³õÖµ£¬Èç¹û²»³õÊ¼»¯¾Í»áÊÇ65535

                     395                             ; SOURCE LINE # 57

001D 758C4C          396             MOV     TH0,#04CH

                     397     ;       TL0=(65536-46080)%256;

                     398                             ; SOURCE LINE # 58

0020 758A00          399             MOV     TL0,#00H

                     400     ;       count++;

                     401                             ; SOURCE LINE # 59

0023 0500     F      402             INC     count

                     403     ;       if(count==1200)  // 1m

                     404                             ; SOURCE LINE # 60

0025 AF00     F      405             MOV     R7,count

0027 7E00            406             MOV     R6,#00H

0029 BE0420          407             CJNE    R6,#04H,?C0017

002C BFB01D          408             CJNE    R7,#0B0H,?C0017

                     409     ;       {

                     410                             ; SOURCE LINE # 61

                     411     ;               count=0;

                     412                             ; SOURCE LINE # 62

002F 750000   F      413             MOV     count,#00H

                     414     ;               minute++;

                     415                             ; SOURCE LINE # 63

0032 0500     F      416             INC     minute

                     417     ;               if(minute==60)

                     418                             ; SOURCE LINE # 64

0034 E500     F      419             MOV     A,minute

0036 B43C0D          420             CJNE    A,#03CH,?C0015

                     421     ;               {

                     422                             ; SOURCE LINE # 65

                     423     ;                       minute=0;

                     424                             ; SOURCE LINE # 66

0039 750000   F      425             MOV     minute,#00H

                     426     ;                       hour++;

                     427                             ; SOURCE LINE # 67

003C 0500     F      428             INC     hour

                     429     ;                       if(hour==24)

                     430                             ; SOURCE LINE # 68

003E E500     F      431             MOV     A,hour

0040 B41803          432             CJNE    A,#018H,?C0015

                     433     ;                               hour=0;

                     434                             ; SOURCE LINE # 69

0043 750000   F      435             MOV     hour,#00H

                     436     ;               }

                     437                             ; SOURCE LINE # 70

0046                 438     ?C0015:

                     439     ;               Bin2Bcd();

                     440                             ; SOURCE LINE # 71

0046 120000   F      441             LCALL   Bin2Bcd

                     442     ;               P1=0xff;

                     443                             ; SOURCE LINE # 72

0049 7590FF          444             MOV     P1,#0FFH

                     445     ;       }

                     446                             ; SOURCE LINE # 73

                     447     ; }

                     448                             ; SOURCE LINE # 74

004C                 449     ?C0017:

004C D007            450             POP     AR7

004E D006            451             POP     AR6

0050 D005            452             POP     AR5

0052 D004            453             POP     AR4

A51 MACRO ASSEMBLER  CLOCK                                                                01/21/2018 13:56:58 PAGE     8

0054 D003            454             POP     AR3

0056 D002            455             POP     AR2

0058 D001            456             POP     AR1

005A D000            457             POP     AR0

005C D0D0            458             POP     PSW

005E D082            459             POP     DPL

0060 D083            460             POP     DPH

0062 D0F0            461             POP     B

0064 D0E0            462             POP     ACC

0066 32              463             RETI    

                     464     ; END OF TC0

                     465     

                     466     ; 

                     467     ; // ¼ÓÊ±

                     468     ; void add_time(void)

                     469     

----                 470             RSEG  ?PR?add_time?CLOCK

0000                 471     add_time:

                     472                             ; SOURCE LINE # 77

                     473     ; {

                     474                             ; SOURCE LINE # 78

                     475     ;       minute++;

                     476                             ; SOURCE LINE # 79

0000 0500     F      477             INC     minute

                     478     ;       if(minute==60)

                     479                             ; SOURCE LINE # 80

0002 E500     F      480             MOV     A,minute

0004 B43C0D          481             CJNE    A,#03CH,?C0020

                     482     ;       {

                     483                             ; SOURCE LINE # 81

                     484     ;               minute=0;

                     485                             ; SOURCE LINE # 82

0007 E4              486             CLR     A

0008 F500     F      487             MOV     minute,A

                     488     ;               hour++;

                     489                             ; SOURCE LINE # 83

000A 0500     F      490             INC     hour

                     491     ;               if(hour==24)

                     492                             ; SOURCE LINE # 84

000C E500     F      493             MOV     A,hour

000E B41803          494             CJNE    A,#018H,?C0020

                     495     ;                       hour=0;

                     496                             ; SOURCE LINE # 85

0011 E4              497             CLR     A

0012 F500     F      498             MOV     hour,A

                     499     ;       }

                     500                             ; SOURCE LINE # 86

                     501     ; }

                     502                             ; SOURCE LINE # 87

0014                 503     ?C0020:

0014 22              504             RET     

                     505     ; END OF add_time

                     506     

                     507     ; 

                     508     ; // ¼õÊ±

                     509     ; void sub_time(void)

                     510     

----                 511             RSEG  ?PR?sub_time?CLOCK

0000                 512     sub_time:

                     513                             ; SOURCE LINE # 90

                     514     ; {

                     515                             ; SOURCE LINE # 91

                     516     ;       minute--;

                     517                             ; SOURCE LINE # 92

0000 1500     F      518             DEC     minute

                     519     ;       if(minute<0)

A51 MACRO ASSEMBLER  CLOCK                                                                01/21/2018 13:56:58 PAGE     9

                     520                             ; SOURCE LINE # 93

0002 C3              521             CLR     C

0003 E500     F      522             MOV     A,minute

0005 6480            523             XRL     A,#080H

0007 9480            524             SUBB    A,#080H

0009 5011            525             JNC     ?C0023

                     526     ;       {

                     527                             ; SOURCE LINE # 94

                     528     ;               minute=59;

                     529                             ; SOURCE LINE # 95

000B 75003B   F      530             MOV     minute,#03BH

                     531     ;               hour--;

                     532                             ; SOURCE LINE # 96

000E 1500     F      533             DEC     hour

                     534     ;               if(hour<0)

                     535                             ; SOURCE LINE # 97

0010 C3              536             CLR     C

0011 E500     F      537             MOV     A,hour

0013 6480            538             XRL     A,#080H

0015 9480            539             SUBB    A,#080H

0017 5003            540             JNC     ?C0023

                     541     ;                       hour=23;

                     542                             ; SOURCE LINE # 98

0019 750017   F      543             MOV     hour,#017H

                     544     ;       }

                     545                             ; SOURCE LINE # 99

                     546     ; }

                     547                             ; SOURCE LINE # 100

001C                 548     ?C0023:

001C 22              549             RET     

                     550     ; END OF sub_time

                     551     

                     552     ; 

                     553     ; void key1_down(void)

                     554     

----                 555             RSEG  ?PR?key1_down?CLOCK

0000                 556     key1_down:

                     557             USING   0

                     558                             ; SOURCE LINE # 102

                     559     ; {

                     560                             ; SOURCE LINE # 103

                     561     ;       uchar i;

                     562     ;       Delay(2);

                     563                             ; SOURCE LINE # 105

0000 7F02            564             MOV     R7,#02H

0002 7E00            565             MOV     R6,#00H

0004 120000   F      566             LCALL   _Delay

                     567     ;       if(P3==0xef)

                     568                             ; SOURCE LINE # 106

0007 E5B0            569             MOV     A,P3

0009 B4EF15          570             CJNE    A,#0EFH,?C0028

                     571     ;       {

                     572                             ; SOURCE LINE # 107

                     573     ;               add_time();

                     574                             ; SOURCE LINE # 108

000C 120000   F      575             LCALL   add_time

                     576     ;               for(i=0;i<20;i++)

                     577                             ; SOURCE LINE # 109

000F E4              578             CLR     A

0010 F500     F      579             MOV     i?744,A

0012                 580     ?C0025:

                     581     ;               {

                     582                             ; SOURCE LINE # 110

                     583     ;                       Bin2Bcd();

                     584                             ; SOURCE LINE # 111

0012 120000   F      585             LCALL   Bin2Bcd

A51 MACRO ASSEMBLER  CLOCK                                                                01/21/2018 13:56:58 PAGE    10

                     586     ;                       display();

                     587                             ; SOURCE LINE # 112

0015 120000   F      588             LCALL   display

                     589     ;               }

                     590                             ; SOURCE LINE # 113

0018 0500     F      591             INC     i?744

001A E500     F      592             MOV     A,i?744

001C C3              593             CLR     C

001D 9414            594             SUBB    A,#014H

001F 40F1            595             JC      ?C0025

                     596     ;       }

                     597                             ; SOURCE LINE # 114

                     598     ; }

                     599                             ; SOURCE LINE # 115

0021                 600     ?C0028:

0021 22              601             RET     

                     602     ; END OF key1_down

                     603     

                     604     ; 

                     605     ; void key2_down(void)

                     606     

----                 607             RSEG  ?PR?key2_down?CLOCK

0000                 608     key2_down:

                     609             USING   0

                     610                             ; SOURCE LINE # 117

                     611     ; {

                     612                             ; SOURCE LINE # 118

                     613     ;       uchar i;

                     614     ;       Delay(2);

                     615                             ; SOURCE LINE # 120

0000 7F02            616             MOV     R7,#02H

0002 7E00            617             MOV     R6,#00H

0004 120000   F      618             LCALL   _Delay

                     619     ;       if(P3==0xdf)

                     620                             ; SOURCE LINE # 121

0007 E5B0            621             MOV     A,P3

0009 B4DF15          622             CJNE    A,#0DFH,?C0033

                     623     ;       {

                     624                             ; SOURCE LINE # 122

                     625     ;               sub_time();

                     626                             ; SOURCE LINE # 123

000C 120000   F      627             LCALL   sub_time

                     628     ;               for(i=0;i<20;i++)

                     629                             ; SOURCE LINE # 124

000F E4              630             CLR     A

0010 F500     F      631             MOV     i?845,A

0012                 632     ?C0030:

                     633     ;               {

                     634                             ; SOURCE LINE # 125

                     635     ;                       Bin2Bcd();

                     636                             ; SOURCE LINE # 126

0012 120000   F      637             LCALL   Bin2Bcd

                     638     ;                       display();

                     639                             ; SOURCE LINE # 127

0015 120000   F      640             LCALL   display

                     641     ;               }

                     642                             ; SOURCE LINE # 128

0018 0500     F      643             INC     i?845

001A E500     F      644             MOV     A,i?845

001C C3              645             CLR     C

001D 9414            646             SUBB    A,#014H

001F 40F1            647             JC      ?C0030

                     648     ;       }

                     649                             ; SOURCE LINE # 129

                     650     ; }

                     651                             ; SOURCE LINE # 130

A51 MACRO ASSEMBLER  CLOCK                                                                01/21/2018 13:56:58 PAGE    11

0021                 652     ?C0033:

0021 22              653             RET     

                     654     ; END OF key2_down

                     655     

                     656     ; 

                     657     ; void main(void)

                     658     

----                 659             RSEG  ?PR?main?CLOCK

0000                 660     main:

                     661             USING   0

                     662                             ; SOURCE LINE # 132

                     663     ; {

                     664                             ; SOURCE LINE # 133

                     665     ;       INT_Init();

                     666                             ; SOURCE LINE # 134

0000 120000   F      667             LCALL   INT_Init

0003                 668     ?C0034:

                     669     ;       while(1)

                     670                             ; SOURCE LINE # 135

                     671     ;       {

                     672                             ; SOURCE LINE # 136

                     673     ;               display();

                     674                             ; SOURCE LINE # 137

0003 120000   F      675             LCALL   display

                     676     ;               if(P3==0xef) key1_down();

                     677                             ; SOURCE LINE # 138

0006 E5B0            678             MOV     A,P3

0008 B4EF05          679             CJNE    A,#0EFH,?C0036

000B 120000   F      680             LCALL   key1_down

000E 8008            681             SJMP    ?C0037

0010                 682     ?C0036:

                     683     ;               else if(P3==0xdf) key2_down();

                     684                             ; SOURCE LINE # 139

0010 E5B0            685             MOV     A,P3

0012 B4DF03          686             CJNE    A,#0DFH,?C0037

0015 120000   F      687             LCALL   key2_down

0018                 688     ?C0037:

                     689     ;               if(hour==clock1[0]&&minute==clock1[1]) P1=0x00;

                     690                             ; SOURCE LINE # 140

0018 E500     F      691             MOV     A,clock1

001A B500E6   F      692             CJNE    A,hour,?C0034

001D E500     F      693             MOV     A,clock1+01H

001F B500E1   F      694             CJNE    A,minute,?C0034

0022 E4              695             CLR     A

0023 F590            696             MOV     P1,A

                     697     ;       }

                     698                             ; SOURCE LINE # 141

0025 80DC            699             SJMP    ?C0034

                     700     ; END OF main

                     701     

                     702             END

A51 MACRO ASSEMBLER  CLOCK                                                                01/21/2018 13:56:58 PAGE    12

SYMBOL TABLE LISTING
------ ----- -------


N A M E              T Y P E  V A L U E   ATTRIBUTES

?C0001. . . . . . .  C ADDR   0003H   R   SEG=?PR?_DELAY?CLOCK
?C0003. . . . . . .  C ADDR   0018H   R   SEG=?PR?_DELAY?CLOCK
?C0004. . . . . . .  C ADDR   000DH   R   SEG=?PR?_DELAY?CLOCK
?C0007. . . . . . .  C ADDR   001FH   R   SEG=?PR?_DELAY?CLOCK
?C0009. . . . . . .  C ADDR   0002H   R   SEG=?PR?DISPLAY?CLOCK
?C0012. . . . . . .  C ADDR   0026H   R   SEG=?PR?DISPLAY?CLOCK
?C0015. . . . . . .  C ADDR   0046H   R   SEG=?PR?TC0?CLOCK
?C0017. . . . . . .  C ADDR   004CH   R   SEG=?PR?TC0?CLOCK
?C0020. . . . . . .  C ADDR   0014H   R   SEG=?PR?ADD_TIME?CLOCK
?C0023. . . . . . .  C ADDR   001CH   R   SEG=?PR?SUB_TIME?CLOCK
?C0025. . . . . . .  C ADDR   0012H   R   SEG=?PR?KEY1_DOWN?CLOCK
?C0028. . . . . . .  C ADDR   0021H   R   SEG=?PR?KEY1_DOWN?CLOCK
?C0030. . . . . . .  C ADDR   0012H   R   SEG=?PR?KEY2_DOWN?CLOCK
?C0033. . . . . . .  C ADDR   0021H   R   SEG=?PR?KEY2_DOWN?CLOCK
?C0034. . . . . . .  C ADDR   0003H   R   SEG=?PR?MAIN?CLOCK
?C0036. . . . . . .  C ADDR   0010H   R   SEG=?PR?MAIN?CLOCK
?C0037. . . . . . .  C ADDR   0018H   R   SEG=?PR?MAIN?CLOCK
?C0041. . . . . . .  C ADDR   0012H   R   SEG=?PR?_DELAY?CLOCK
?C0042. . . . . . .  C ADDR   001DH   R   SEG=?PR?_DELAY?CLOCK
?C0043. . . . . . .  C ADDR   0009H   R   SEG=?PR?DISPLAY?CLOCK
?C0044. . . . . . .  C ADDR   000BH   R   SEG=?PR?DISPLAY?CLOCK
?C?SCDIV. . . . . .  C ADDR   -----       EXT
?C_INITSEG. . . . .  C SEG    001CH       REL=UNIT
?C_STARTUP. . . . .  C ADDR   -----       EXT
?DT?CLOCK . . . . .  D SEG    0014H       REL=UNIT
?DT?KEY1_DOWN?CLOCK  D SEG    0001H       REL=UNIT
?DT?KEY2_DOWN?CLOCK  D SEG    0001H       REL=UNIT
?KEY1_DOWN?BYTE . .  D ADDR   0000H   R   SEG=?DT?KEY1_DOWN?CLOCK
?KEY2_DOWN?BYTE . .  D ADDR   0000H   R   SEG=?DT?KEY2_DOWN?CLOCK
?PR?ADD_TIME?CLOCK.  C SEG    0015H       REL=UNIT
?PR?BIN2BCD?CLOCK .  C SEG    002BH       REL=UNIT
?PR?DISPLAY?CLOCK .  C SEG    0027H       REL=UNIT
?PR?INT_INIT?CLOCK.  C SEG    0010H       REL=UNIT
?PR?KEY1_DOWN?CLOCK  C SEG    0022H       REL=UNIT
?PR?KEY2_DOWN?CLOCK  C SEG    0022H       REL=UNIT
?PR?MAIN?CLOCK. . .  C SEG    0027H       REL=UNIT
?PR?SUB_TIME?CLOCK.  C SEG    001DH       REL=UNIT
?PR?TC0?CLOCK . . .  C SEG    0067H       REL=UNIT
?PR?_DELAY?CLOCK. .  C SEG    0020H       REL=UNIT
AC. . . . . . . . .  B ADDR   00D0H.6 A   
ACC . . . . . . . .  D ADDR   00E0H   A   
ADD_TIME. . . . . .  C ADDR   0000H   R   SEG=?PR?ADD_TIME?CLOCK
AR0 . . . . . . . .  D ADDR   0000H   A   
AR1 . . . . . . . .  D ADDR   0001H   A   
AR2 . . . . . . . .  D ADDR   0002H   A   
AR3 . . . . . . . .  D ADDR   0003H   A   
AR4 . . . . . . . .  D ADDR   0004H   A   
AR5 . . . . . . . .  D ADDR   0005H   A   
AR6 . . . . . . . .  D ADDR   0006H   A   
AR7 . . . . . . . .  D ADDR   0007H   A   
B . . . . . . . . .  D ADDR   00F0H   A   
BIN2BCD . . . . . .  C ADDR   0000H   R   SEG=?PR?BIN2BCD?CLOCK
CLOCK . . . . . . .  N NUMB   -----       
CLOCK1. . . . . . .  D ADDR   000DH   R   SEG=?DT?CLOCK
COUNT . . . . . . .  D ADDR   000CH   R   SEG=?DT?CLOCK
CP_RL2. . . . . . .  B ADDR   00C8H.0 A   
CY. . . . . . . . .  B ADDR   00D0H.7 A   
C_T2. . . . . . . .  B ADDR   00C8H.1 A   
DISPLAY . . . . . .  C ADDR   0000H   R   SEG=?PR?DISPLAY?CLOCK
DIS_BUFF. . . . . .  D ADDR   0010H   R   SEG=?DT?CLOCK
A51 MACRO ASSEMBLER  CLOCK                                                                01/21/2018 13:56:58 PAGE    13

DIS_CODE. . . . . .  D ADDR   0001H   R   SEG=?DT?CLOCK
DPH . . . . . . . .  D ADDR   0083H   A   
DPL . . . . . . . .  D ADDR   0082H   A   
EA. . . . . . . . .  B ADDR   00A8H.7 A   
ES. . . . . . . . .  B ADDR   00A8H.4 A   
ET0 . . . . . . . .  B ADDR   00A8H.1 A   
ET1 . . . . . . . .  B ADDR   00A8H.3 A   
ET2 . . . . . . . .  B ADDR   00A8H.5 A   
EX0 . . . . . . . .  B ADDR   00A8H.0 A   
EX1 . . . . . . . .  B ADDR   00A8H.2 A   
EXEN2 . . . . . . .  B ADDR   00C8H.3 A   
EXF2. . . . . . . .  B ADDR   00C8H.6 A   
F0. . . . . . . . .  B ADDR   00D0H.5 A   
HOUR. . . . . . . .  D ADDR   000FH   R   SEG=?DT?CLOCK
I?744 . . . . . . .  D ADDR   0000H   R   SEG=?DT?KEY1_DOWN?CLOCK
I?845 . . . . . . .  D ADDR   0000H   R   SEG=?DT?KEY2_DOWN?CLOCK
IE. . . . . . . . .  D ADDR   00A8H   A   
IE0 . . . . . . . .  B ADDR   0088H.1 A   
IE1 . . . . . . . .  B ADDR   0088H.3 A   
INT0. . . . . . . .  B ADDR   00B0H.2 A   
INT1. . . . . . . .  B ADDR   00B0H.3 A   
INT_INIT. . . . . .  C ADDR   0000H   R   SEG=?PR?INT_INIT?CLOCK
IP. . . . . . . . .  D ADDR   00B8H   A   
IT0 . . . . . . . .  B ADDR   0088H.0 A   
IT1 . . . . . . . .  B ADDR   0088H.2 A   
KEY1_DOWN . . . . .  C ADDR   0000H   R   SEG=?PR?KEY1_DOWN?CLOCK
KEY2_DOWN . . . . .  C ADDR   0000H   R   SEG=?PR?KEY2_DOWN?CLOCK
MAIN. . . . . . . .  C ADDR   0000H   R   SEG=?PR?MAIN?CLOCK
MINUTE. . . . . . .  D ADDR   0000H   R   SEG=?DT?CLOCK
MODE. . . . . . . .  D ADDR   000BH   R   SEG=?DT?CLOCK
OV. . . . . . . . .  B ADDR   00D0H.2 A   
P . . . . . . . . .  B ADDR   00D0H.0 A   
P0. . . . . . . . .  D ADDR   0080H   A   
P1. . . . . . . . .  D ADDR   0090H   A   
P2. . . . . . . . .  D ADDR   00A0H   A   
P3. . . . . . . . .  D ADDR   00B0H   A   
PCON. . . . . . . .  D ADDR   0087H   A   
PS. . . . . . . . .  B ADDR   00B8H.4 A   
PSW . . . . . . . .  D ADDR   00D0H   A   
PT0 . . . . . . . .  B ADDR   00B8H.1 A   
PT1 . . . . . . . .  B ADDR   00B8H.3 A   
PT2 . . . . . . . .  B ADDR   00B8H.5 A   
PX0 . . . . . . . .  B ADDR   00B8H.0 A   
PX1 . . . . . . . .  B ADDR   00B8H.2 A   
RB8 . . . . . . . .  B ADDR   0098H.2 A   
RCAP2H. . . . . . .  D ADDR   00CBH   A   
RCAP2L. . . . . . .  D ADDR   00CAH   A   
RCLK. . . . . . . .  B ADDR   00C8H.5 A   
RD. . . . . . . . .  B ADDR   00B0H.7 A   
REN . . . . . . . .  B ADDR   0098H.4 A   
RI. . . . . . . . .  B ADDR   0098H.0 A   
RS0 . . . . . . . .  B ADDR   00D0H.3 A   
RS1 . . . . . . . .  B ADDR   00D0H.4 A   
RXD . . . . . . . .  B ADDR   00B0H.0 A   
SBUF. . . . . . . .  D ADDR   0099H   A   
SCON. . . . . . . .  D ADDR   0098H   A   
SM0 . . . . . . . .  B ADDR   0098H.7 A   
SM1 . . . . . . . .  B ADDR   0098H.6 A   
SM2 . . . . . . . .  B ADDR   0098H.5 A   
SP. . . . . . . . .  D ADDR   0081H   A   
SUB_TIME. . . . . .  C ADDR   0000H   R   SEG=?PR?SUB_TIME?CLOCK
T0. . . . . . . . .  B ADDR   00B0H.4 A   
T1. . . . . . . . .  B ADDR   00B0H.5 A   
T2. . . . . . . . .  B ADDR   0090H.0 A   
T2CON . . . . . . .  D ADDR   00C8H   A   
T2EX. . . . . . . .  B ADDR   0090H.1 A   
A51 MACRO ASSEMBLER  CLOCK                                                                01/21/2018 13:56:58 PAGE    14

TB8 . . . . . . . .  B ADDR   0098H.3 A   
TC0 . . . . . . . .  C ADDR   0000H   R   SEG=?PR?TC0?CLOCK
TCLK. . . . . . . .  B ADDR   00C8H.4 A   
TCON. . . . . . . .  D ADDR   0088H   A   
TF0 . . . . . . . .  B ADDR   0088H.5 A   
TF1 . . . . . . . .  B ADDR   0088H.7 A   
TF2 . . . . . . . .  B ADDR   00C8H.7 A   
TH0 . . . . . . . .  D ADDR   008CH   A   
TH1 . . . . . . . .  D ADDR   008DH   A   
TH2 . . . . . . . .  D ADDR   00CDH   A   
TI. . . . . . . . .  B ADDR   0098H.1 A   
TL0 . . . . . . . .  D ADDR   008AH   A   
TL1 . . . . . . . .  D ADDR   008BH   A   
TL2 . . . . . . . .  D ADDR   00CCH   A   
TMOD. . . . . . . .  D ADDR   0089H   A   
TR0 . . . . . . . .  B ADDR   0088H.4 A   
TR1 . . . . . . . .  B ADDR   0088H.6 A   
TR2 . . . . . . . .  B ADDR   00C8H.2 A   
TXD . . . . . . . .  B ADDR   00B0H.1 A   
WR. . . . . . . . .  B ADDR   00B0H.6 A   
_DELAY. . . . . . .  C ADDR   0000H   R   SEG=?PR?_DELAY?CLOCK


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
